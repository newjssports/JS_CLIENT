<!-- Category Form and Grid -->
<div class="form-container">
    <h2>Category Setup</h2>
    <form [formGroup]="categoryForm">
      <mat-form-field class="margin-field" appearance="fill">
        <mat-label>Category Name</mat-label>
        <input matInput formControlName="name">
      </mat-form-field>
      <button mat-raised-button color="primary" (click)="addCategory()">
        {{ categoryForm.value.id ? 'Update Category' : 'Add Category' }}
      </button>
    </form>
  
    <div class="grid">
      <table mat-table [dataSource]="categories">
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef> Category </th>
          <td mat-cell *matCellDef="let category">{{ category.name }}</td>
        </ng-container>
        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef> Actions </th>
          <td mat-cell *matCellDef="let category">
            <button mat-icon-button (click)="editCategory(category)">
              <mat-icon>edit</mat-icon>
            </button>
            <button mat-icon-button (click)="deleteCategory(category.id)">
              <mat-icon>delete</mat-icon>
            </button>
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="['name', 'actions']"></tr>
        <tr mat-row *matRowDef="let row; columns: ['name', 'actions'];"></tr>
      </table>
    </div>
  </div>
  
  <!-- Item Form and Grid -->
  <div class="form-container">
    <h2>Item Setup</h2>
    <form [formGroup]="itemForm">
      <mat-form-field class="margin-field" appearance="fill">
        <mat-label>Item Name</mat-label>
        <input matInput formControlName="itemName">
      </mat-form-field>
      <mat-form-field class="margin-field" appearance="fill">
        <mat-label>Description</mat-label>
        <input matInput formControlName="description">
      </mat-form-field>
      <mat-form-field class="margin-field" appearance="fill">
        <mat-label>Category</mat-label>
        <mat-select formControlName="itemCategoryId">
            <mat-option *ngFor="let category of categories" [value]="category.id">
              {{ category.name }}
            </mat-option>
          </mat-select>
        <!-- <mat-select formControlName="itemCategoryId">
          <mat-option *ngFor="let category of categories" [value]="category.id">
            {{ category.name }}
          </mat-option>
        </mat-select> -->
      </mat-form-field>
      <mat-form-field class="margin-field" appearance="fill">
        <mat-label>SKU</mat-label>
        <input matInput formControlName="sku">
      </mat-form-field>
      <mat-form-field class="margin-field" appearance="fill">
        <mat-label>UPC</mat-label>
        <input matInput formControlName="upc">
      </mat-form-field>
      <mat-form-field class="margin-field" appearance="fill">
        <mat-label>Cost Price</mat-label>
        <input matInput formControlName="costPrice" type="number">
      </mat-form-field>
      <mat-form-field class="margin-field" appearance="fill">
        <mat-label>Selling Price</mat-label>
        <input matInput formControlName="sellingPrice" type="number">
      </mat-form-field>
      <mat-form-field class="margin-field" appearance="fill">
        <mat-label>Weight</mat-label>
        <input matInput formControlName="weight" type="number">
      </mat-form-field>
      <mat-form-field class="margin-field" appearance="fill">
        <mat-label>Color</mat-label>
        <input matInput formControlName="color">
      </mat-form-field>
      <mat-form-field class="margin-field" appearance="fill">
        <mat-label>Size</mat-label>
        <input matInput formControlName="size">
      </mat-form-field>
      <mat-form-field class="margin-field" appearance="fill">
        <mat-label>Dimensions</mat-label>
        <input matInput formControlName="dimensions">
      </mat-form-field>
      <mat-form-field class="margin-field" appearance="fill">
        <mat-label>Brand</mat-label>
        <input matInput formControlName="brand">
      </mat-form-field>
      <mat-form-field class="margin-field" appearance="fill">
        <mat-label>Model</mat-label>
        <input matInput formControlName="model">
      </mat-form-field>
      <button mat-raised-button color="primary" (click)="addItem()">
        {{ itemForm.value.id ? 'Update Item' : 'Add Item' }}
      </button>
    </form>
  
    <div class="grid">
      <table mat-table [dataSource]="items">
        <ng-container matColumnDef="itemName">
          <th mat-header-cell *matHeaderCellDef> Item Name </th>
          <td mat-cell *matCellDef="let item">{{ item.itemName }}</td>
        </ng-container>
        <ng-container matColumnDef="description">
          <th mat-header-cell *matHeaderCellDef> Description </th>
          <td mat-cell *matCellDef="let item">{{ item.description }}</td>
        </ng-container>
        <ng-container matColumnDef="category">
          <th mat-header-cell *matHeaderCellDef> Category </th>
          <td mat-cell *matCellDef="let item">
            {{ getCategoryName(item.itemCategoryId) }}
          </td>
          <!-- <td mat-cell *matCellDef="let item">
            {{ categories.find(cat => cat.id === item.itemCategoryId)?.name || 'No Category' }}
          </td> -->
        </ng-container>
        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef> Actions </th>
          <td mat-cell *matCellDef="let item">
            <button mat-icon-button (click)="editItem(item)">
              <mat-icon>edit</mat-icon>
            </button>
            <button mat-icon-button (click)="deleteItem(item.id)">
              <mat-icon>delete</mat-icon>
            </button>
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="['itemName', 'description', 'category', 'actions']"></tr>
        <tr mat-row *matRowDef="let row; columns: ['itemName', 'description', 'category', 'actions'];"></tr>
      </table>
    </div>
  </div>